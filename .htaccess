<IfModule mod_rewrite.c>
RewriteEngine On

# ----------------------------
# Serve index.php inside folders if it exists
# ----------------------------
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_FILENAME}/index.php -f
RewriteRule ^(.*)$ $1/index.php [L]

# ----------------------------
# Serve files if they exist
# ----------------------------
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# ----------------------------
# Redirect anything else to 404.php
# ----------------------------
RewriteRule ^.*$ /404.php [L]
</IfModule>

# Disable automatic trailing slash redirect
DirectorySlash Off

# Prevent directory listing
Options -Indexes
